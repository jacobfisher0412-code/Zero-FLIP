import random

# Player stats
player = {
    "health": 100,
    "shield": 50,
    "ammo": 10,
    "energy_boosters": 1
}

# Enemy types
enemy_types = {
    "A": {"name": "Alien A", "hp": 20, "damage": 10},
    "B": {"name": "Alien B", "hp": 40, "damage": 15},
    "C": {"name": "Alien C", "hp": 60, "damage": 20}
}

def spawn_enemies():
    num_enemies = random.randint(1, 3)
    enemies = []
    for _ in range(num_enemies):
        etype = random.choice(list(enemy_types.keys()))
        enemy = enemy_types[etype].copy()
        enemies.append(enemy)
    return enemies

def player_attack(enemy):
    if player["ammo"] <= 0:
        print("No ammo! You must reload.")
        return
    damage = random.randint(15, 30)
    enemy["hp"] -= damage
    player["ammo"] -= 1
    print(f"You shoot {enemy['name']} for {damage} damage! Its HP is now {max(enemy['hp'],0)}.")

def dodge():
    success = random.random() < 0.6
    if success:
        print("You dodged successfully!")
    else:
        print("Dodge failed! Enemy attacks hit you.")
        enemy_attack()

def reload():
    player["ammo"] += 5
    print("You reload 5 ammo.")

def use_shield():
    if player["energy_boosters"] > 0:
        player["shield"] += 30
        player["energy_boosters"] -= 1
        print("Shield boosted by 30!")
    else:
        print("No energy boosters left!")

def enemy_attack(enemies=None):
    if enemies is None:
        return
    for enemy in enemies:
        if enemy["hp"] > 0:
            damage = enemy["damage"]
            if player["shield"] > 0:
                shield_damage = min(player["shield"], damage)
                player["shield"] -= shield_damage
                damage -= shield_damage
            if damage > 0:
                player["health"] -= damage
            print(f"{enemy['name']} attacks! Health: {player['health']}, Shield: {player['shield']}")

# Game loop
round_num = 1
while player["health"] > 0:
    print(f"\n--- Round {round_num} ---")
    enemies = spawn_enemies()
    for i, e in enumerate(enemies):
        print(f"{i+1}: {e['name']} (HP: {e['hp']})")
    
    while any(e["hp"] > 0 for e in enemies) and player["health"] > 0:
        print(f"\nPlayer Stats: Health: {player['health']}, Shield: {player['shield']}, Ammo: {player['ammo']}, Boosters: {player['energy_boosters']}")
        action = input("Choose action (A=Shoot, B=Dodge, C=Reload, D=Shield): ").upper()
        if action == "A":
            target = random.choice([e for e in enemies if e["hp"] > 0])
            player_attack(target)
        elif action == "B":
            dodge()
        elif action == "C":
            reload()
        elif action == "D":
            use_shield()
        else:
            print("Invalid choice!")
        enemy_attack(enemies)
    
    if player["health"] <= 0:
        print("\nYou were defeated by the aliens...")
        break
    else:
        print(f"\nRound {round_num} cleared! Moving to next round...")
        round_num += 1

print("\nGame Over")\
